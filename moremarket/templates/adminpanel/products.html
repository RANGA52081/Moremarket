{% extends "adminpanel/base_admin.html" %}

{% block content %}

<h2>Products</h2>

<a href="{% url 'adminpanel:product_create' %}" 
   class="btn btn-primary mb-3">
    Add Product
</a>

<table class="table table-bordered">

    <tr>
        <th>Image</th>
        <th>Name</th>
        <th>Category</th>
        <th>Active</th>
        <th>Actions</th>
    </tr>

    {% for product in page_obj %}
    <tr>

        <!-- IMAGE COLUMN -->
        <td>
            {% if product.images.all %}
                <img src="{{ product.images.first.image.url }}"
                     width="70"
                     height="70"
                     style="object-fit: cover; border-radius: 8px;">
            {% else %}
                No Image
            {% endif %}
        </td>

        <td>{{ product.name }}</td>
        <td>{{ product.get_category_display }}</td>
        <td>
            {% if product.is_active %}
                <span class="badge bg-success">Active</span>
            {% else %}
                <span class="badge bg-danger">Inactive</span>
            {% endif %}
        </td>

        <td>
            <a href="{% url 'adminpanel:product_edit' product.id %}">Edit</a> |
            <a href="{% url 'adminpanel:product_delete' product.id %}">Delete</a>
        </td>

    </tr>
    {% endfor %}

</table>

{% endblock %}