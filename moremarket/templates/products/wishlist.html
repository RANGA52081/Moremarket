{% extends "base.html" %}
{% block content %}

<div class="container py-5">

    <h3 class="fw-bold mb-4">My Wishlist ❤️</h3>

    {% if wishlist_items %}

    <div class="row g-4">

        {% for item in wishlist_items %}
        {% with product=item.product %}
        {% with variant=product.variants.first %}

        <div class="col-6 col-md-4 col-lg-3 col-xl-2">
            <div class="wishlist-card">

                <!-- Remove Button -->
                <a href="{% url 'products:toggle_wishlist' product.pk %}" 
                   class="remove-btn">
                    <i class="bi bi-x-lg"></i>
                </a>

                <!-- Image -->
                <a href="{% url 'products:product_detail' product.pk %}">
                    <div class="wishlist-image">
                        {% if product.images.first %}
                            <img src="{{ product.images.first.image.url }}">
                        {% endif %}
                    </div>
                </a>

                <!-- Info -->
                <div class="wishlist-body">
                    <h6>{{ product.name }}</h6>

                    <div class="price">
                        ₹ {{ variant.price }}
                    </div>

                    <a href="{% url 'orders:add_to_cart' product.id %}" 
                       class="btn btn-dark btn-sm w-100 mt-2">
                        Add to Cart
                    </a>
                </div>

            </div>
        </div>

        {% endwith %}
        {% endwith %}
        {% endfor %}

    </div>

    {% else %}

    <!-- Empty Wishlist -->
    <div class="text-center py-5">
        <i class="bi bi-heart fs-1 text-muted"></i>
        <h5 class="mt-3">Your wishlist is empty</h5>
        <a href="{% url 'customer_home' %}" class="btn btn-dark mt-3">
            Continue Shopping
        </a>
    </div>

    {% endif %}

</div>
{% endblock %}